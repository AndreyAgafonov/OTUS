# Lesson 19 Сетевая лаборатория

Разворачиваем сетевую лабораторию

# Дано
https://github.com/erlong15/otus-linux/tree/network
(ветка network)

Vagrantfile с начальным построением сети
- inetRouter
- centralRouter
- centralServer

тестировалось на virtualbox

# Планируемая архитектура
построить следующую архитектуру

Сеть office1
- 192.168.2.0/26 - dev
- 192.168.2.64/26 - test servers
- 192.168.2.128/26 - managers
- 192.168.2.192/26 - office hardware

Сеть office2
- 192.168.1.0/25 - dev
- 192.168.1.128/26 - test servers
- 192.168.1.192/26 - office hardware


Сеть central
- 192.168.0.0/28 - directors
- 192.168.0.32/28 - office hardware
- 192.168.0.64/26 - wifi

```
Office1 ---\
-----> Central --IRouter --> internet
Office2----/
```
Итого должны получится следующие сервера
- inetRouter
- centralRouter
- office1Router
- office2Router
- centralServer
- office1Server
- office2Server



### Теоретическая часть
1. Найти свободные подсети
2. Посчитать сколько узлов в каждой подсети, включая свободные
3. Указать broadcast адрес для каждой подсети
4. Проверить нет ли ошибок при разбиении
### Практическая часть
1. Соединить офисы в сеть согласно схеме и настроить роутинг
2. Все сервера и роутеры должны ходить в инет черз inetRouter
3. Все сервера должны видеть друг друга
4. У всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи при нехватке сетевых интервейсов добавить по несколько адресов на интерфейс


## Решение: 
### Теоретическая часть
1. Свободные подсети 3:

|Address|Netmask	|Network	|Broadcast	|Hostmin	|HostMax	|Примечание|
|---|---|---|---|---|---|---|
|192.168.0.16/28	|255.255.255.240	|192.168.0.16/28	|192.168.0.31	|192.168.0.17	|192.168.0.30	|Свободная субсеть|
|192.168.0.48/28	|255.255.255.240	|192.168.0.48/28	|192.168.0.63	|192.168.0.49	|192.168.0.62	|Свободная субсеть
|192.168.0.128/25	|255.255.255.128	|192.168.0.128/25	|192.168.0.255	|192.168.0.129	|192.168.0.254	|Свободная субсеть|

2. Посчитать сколько узлов в каждой подсети, включая свободные:
  - Сеть 1. 192.168.0.0/24. Подсети: 
     - 1 подсеть /25 по 126 хостов
     - 1 подсеть /26 по 62 хоста
     - 4 подсети /28 по 14 хостов

//Либо субсети пожно еще поделить в зависимости от потребности

   - Сеть 2 192.168.1.0/24 Подсети:
      - 1 подсеть /25 по 126 хостов
      - 2 под сети /26 по 62 хоста

   - Сеть 3 192.168.2.0/24 Подсети:

      - 4 подсети  /26 по 62 хоста

Address|Netmask|Network|Broadcast|Hostmin|HostMax|Примечание
---|---|---|---|---|---|---
|192.168.0.0/28|255.255.255.240|192.168.0.0/28|192.168.0.15|192.168.0.1|192.168.0.14|
|192.168.0.16/28|255.255.255.240|192.168.0.16/28|192.168.0.31|192.168.0.17|192.168.0.30|Свободная субсеть|
|192.168.0.32/28|255.255.255.240|192.168.0.32/28|192.168.0.47|192.168.0.33|192.168.0.46|
|192.168.0.48/28|255.255.255.240|192.168.0.48/28|192.168.0.63|192.168.0.49|192.168.0.62|Свободная субсеть|
|192.168.0.64/26|255.255.255.192|192.168.0.64/26|192.168.0.127|192.168.0.65|192.168.0.126|
|192.168.0.128/25|255.255.255.128|192.168.0.128/25|192.168.0.255|192.168.0.129|192.168.0.254|Свободная субсеть|
|192.168.1.0/25|255.255.255.128|192.168.1.0/25|192.168.1.127|192.168.1.1|192.168.1.126|
|192.168.1.128/26|255.255.255.192|192.168.1.128/26|192.168.1.191|192.168.1.129|192.168.1.190|
|192.168.1.192/26|255.255.255.192|192.168.1.192/26|192.168.1.255|192.168.1.193|192.168.1.254|
|192.168.2.0/26|255.255.255.192|192.168.2.0/26|192.168.2.63|192.168.2.1|192.168.2.62|
|192.168.2.64/26|255.255.255.192|192.168.2.64/26|192.168.2.127|192.168.2.65|192.168.2.126|
|192.168.2.128/26|255.255.255.192|192.168.2.128/26|192.168.2.191|192.168.2.129|192.168.2.190|
|192.168.2.192/26|255.255.255.192|192.168.2.192/26|192.168.2.255|192.168.2.193|192.168.2.254|

|Длина маски|Количество хостов в сети|
|---|---|
|25|126|
|26|62|
|28|14|

3. Указать broadcast адрес для каждой подсети см *п1*
4. Ошибок в указании подсетей нет. Всего используется 3 сети  /24 (выделил в отдельные блоки) по 254 хоста в каждой
   
### Практическая часть